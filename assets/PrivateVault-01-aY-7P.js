import{r as o,d as f,e as h,j as e,f as b,g as y,h as j,i as m,k as g,l as N,m as v,n as p,p as w,q as k,t as D,a as S}from"./index-VRwIwNwo.js";function C(){const[n,i]=o.useState([]),[a,r]=o.useState("");o.useEffect(()=>{const t=f(h(m,"notes"),l=>{i(l.docs.map(s=>({id:s.id,...s.data()})))});return()=>t()},[]);const c=async()=>{a.trim()&&(await b(h(m,"notes"),{text:a.trim(),createdAt:Date.now()}),r(""))},d=async t=>{await y(j(m,"notes",t))};return e.jsxs("div",{className:"bg-white border rounded-lg p-5 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Notes"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{value:a,onChange:t=>r(t.target.value),onKeyDown:t=>t.key==="Enter"&&c(),placeholder:"Write a note...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400"}),e.jsx("button",{onClick:c,className:"px-3 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900 text-sm cursor-pointer",children:"Add"})]}),n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No notes yet."}):e.jsx("div",{className:"space-y-2",children:n.map((t,l)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[l+1,". ",t.text]}),e.jsx("button",{onClick:()=>d(t.id),className:"text-red-500 text-xs font-medium px-1 py-0.5 rounded border border-red-500 hover:cursor-pointer",children:"Delete"})]},t.id))})]})}function L(){const[n,i]=o.useState([]),[a,r]=o.useState("");o.useEffect(()=>{const t=f(h(m,"links"),l=>{i(l.docs.map(s=>({id:s.id,...s.data()})))});return()=>t()},[]);const c=async()=>{a.trim()&&(await b(h(m,"links"),{text:a.trim(),createdAt:Date.now()}),r(""))},d=async t=>{await y(j(m,"links",t))};return e.jsxs("div",{className:"bg-white border rounded-lg p-5 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Links"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{value:a,onChange:t=>r(t.target.value),onKeyDown:t=>t.key==="Enter"&&c(),placeholder:"Paste a link...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-400"}),e.jsx("button",{onClick:c,className:"px-3 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900 text-sm cursor-pointer",children:"Add"})]}),n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No links yet."}):e.jsx("div",{className:"space-y-2",children:n.map((t,l)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsxs("a",{href:t.text,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600 hover:underline truncate",children:[l+1,". ",t.text]}),e.jsx("button",{onClick:()=>d(t.id),className:"text-red-500 text-xs font-medium px-1 py-0.5 rounded border border-red-500 hover:cursor-pointer",children:"Delete"})]},t.id))})]})}function E(){const[n,i]=o.useState([]),[a,r]=o.useState(!1),c=g(p,"vault-files"),d=async()=>{const s=await N(c),x=await Promise.all(s.items.map(async u=>({name:u.name,url:await v(u),ref:u})));i(x)};o.useEffect(()=>{d()},[]);const t=async s=>{const x=s.target.files?.[0];if(x){r(!0);try{const u=g(p,`vault-files/${x.name}`);await w(u,x),await d()}catch(u){console.error("Upload failed:",u)}r(!1)}},l=async s=>{try{await k(s),d()}catch(x){console.error("Delete failed:",x)}};return e.jsxs("div",{className:"bg-white border border rounded-lg p-5 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Files"}),e.jsxs("label",{className:"inline-block mb-4",children:[e.jsx("input",{type:"file",onChange:t,className:"hidden"}),e.jsx("span",{className:"px-4 py-2 bg-gray-900 text-white rounded-lg text-sm cursor-pointer hover:bg-gray-700 transition",children:a?"Uploading...":"Upload File"})]}),n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No files uploaded yet."}):e.jsx("div",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-1",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600 hover:underline truncate",children:s.name}),e.jsx("button",{onClick:()=>l(s.ref),className:"text-xs text-red-500 hover:text-red-700 ml-3",children:"Delete"})]},s.name))})]})}function U(){const{logout:n,user:i}=D(),a=S(),r=async()=>{await n(),a("/vault")};return e.jsx("div",{className:"min-h-screen bg-[#f4f4f4] px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Private Vault"}),e.jsx("button",{onClick:r,className:"bg-gray-900 px-3 py-2 rounded-md text-white font-medium text-sm scale-95 hover:cursor-pointer",children:"Logout"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Welcome back, ",i?.email]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(C,{}),e.jsx(L,{})]}),e.jsx(E,{})]})})}export{U as default};
